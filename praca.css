/* === Conteúdo para praca.css === */

/* --- :root e Variáveis --- */
:root {
    --bg-image-url: url('https://c4.wallpaperflare.com/wallpaper/870/538/510/dragon-ball-dragon-ball-z-west-city-hd-wallpaper-preview.jpg');
    --panel-bg: rgba(25, 28, 36, 0.88);
    --panel-border: rgba(255, 255, 255, 0.1);
    --text-primary: #e0e0e0;
    --text-secondary: #a0a0a0;
    --accent-color-1: #00e676; /* Verde */
    --accent-color-2: #ffab00; /* Laranja/Amarelo */
    --accent-color-3: #2979ff; /* Azul */
    --danger-color: #ff5252; /* Vermelho */
    --disabled-color: #555e6d; /* Cinza desabilitado */
    --border-radius: 12px;
    --shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
    /* Adicionados para modal */
    --dbz-blue: #1a2a4d;
    --dbz-orange: #f5a623;
    --dbz-orange-dark: #e47d1e;
    --dbz-white: #ffffff;
    --dbz-light-grey: #f0f0f0;
    --dbz-dark-grey: #333333;
    --success-color: #00e676; /* Verde sucesso (igual accent-1) */
    --info-color: #29b6f6;  /* Azul claro info */
    --warning-color: #ffa726; /* Laranja aviso */
    --body-original-padding-bottom: 20px; /* Para JS do bottom-nav */
    --font-main: 'Roboto', sans-serif;
}

/* --- Keyframes --- */
@keyframes pulse-glow-button {
    0% { box-shadow: 0 0 8px var(--accent-color-2), inset 0 1px 1px rgba(255,255,255,.2); transform: scale(1); }
    70% { box-shadow: 0 0 16px 4px var(--accent-color-2), inset 0 1px 1px rgba(255,255,255,.3); transform: scale(1.03); }
    100% { box-shadow: 0 0 8px var(--accent-color-2), inset 0 1px 1px rgba(255,255,255,.2); transform: scale(1); }
}
@keyframes ki-charge {
    0% { background-size: 100% 100%; opacity: .6; }
    50% { background-size: 150% 150%; opacity: 1; }
    100% { background-size: 100% 100%; opacity: .6; }
}
@keyframes fadeInChallenge {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* --- Reset e Body --- */
*, *::before, *::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}
body {
    background-image: var(--bg-image-url);
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    color: var(--text-primary);
    font-family: var(--font-main);
    margin: 0;
    padding: 25px;
    min-height: 100vh;
    background-color: #111;
    overflow-x: hidden;
    /* O padding-bottom será ajustado via JS se o bottom-nav estiver visível */
    padding-bottom: var(--body-original-padding-bottom);
}

/* --- Feedback Container --- */
.feedback-container {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto 25px auto;
    padding: 15px 25px;
    background-color: rgba(30, 34, 44, 0.92);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
    text-align: center;
    font-weight: 500;
    font-size: 1rem;
    line-height: 1.6;
    border: 1px solid var(--panel-border);
    /* display: block; Será controlado pelo PHP/JS */
    border-left-width: 5px;
    border-left-color: var(--accent-color-3); /* Default info */
    color: var(--text-primary);
}
/* Variações de cor baseadas nas classes internas */
.feedback-container:has(.error-message),
.feedback-container:has(.error) {
    border-left-color: var(--danger-color);
    background-color: rgba(50, 30, 30, 0.95);
}
.feedback-container .error-message,
.feedback-container .error {
    color: var(--danger-color) !important;
    font-weight: bold;
}
.feedback-container:has(.success-message) {
    border-left-color: var(--success-color);
    background-color: rgba(30, 50, 30, 0.95);
}
.feedback-container .success-message {
    color: var(--success-color) !important;
    font-weight: bold;
}
.feedback-container:has(.info-message) { /* Aplica o estilo padrão azul */
    border-left-color: var(--info-color); /* Usa a cor info */
    background-color: rgba(20, 40, 60, 0.95);
}
.feedback-container .info-message {
    color: var(--info-color) !important;
    font-weight: bold;
}
.feedback-container:has(.warning-message) {
    border-left-color: var(--warning-color);
    background-color: rgba(60, 50, 20, 0.95);
}
.feedback-container .warning-message {
    color: var(--warning-color) !important;
    font-weight: bold;
}

/* --- Layout Geral --- */
.container {
    width: 100%;
    max-width: 1500px; /* Aumentado */
    display: flex;
    justify-content: center;
    gap: 25px;
    align-items: flex-start;
    margin-left: auto;
    margin-right: auto;
}
.coluna {
    background-color: var(--panel-bg);
    border-radius: var(--border-radius);
    padding: 25px;
    box-shadow: var(--shadow);
    border: 1px solid var(--panel-border);
    backdrop-filter: blur(5px);
}

/* --- Coluna Esquerda (Player Info + Chat) --- */
.coluna-esquerda {
    width: 26%;
    min-width: 280px;
    text-align: center;
    display: flex;
    flex-direction: column;
    gap: 15px;
}
/* Player Card */
.player-card { margin-bottom: 8px; }
.foto { width: 130px; height: 130px; border-radius: 50%; object-fit: cover; border: 4px solid var(--accent-color-1); margin-bottom: 12px; box-shadow: 0 0 15px rgba(0, 230, 118, 0.5); }
.player-name { font-size: 1.4rem; font-weight: 700; color: #fff; margin-bottom: 2px; word-wrap: break-word; }
.player-level { font-size: 1.05rem; font-weight: 500; color: var(--accent-color-1); margin-bottom: 4px; }
.player-race { font-size: 0.85rem; font-weight: 500; color: var(--text-secondary); margin-bottom: 4px; }
.player-rank { font-size: 0.85rem; font-weight: 500; color: var(--accent-color-3); margin-bottom: 12px; }
.zeni-display { font-size: 1rem; color: var(--accent-color-2); font-weight: 700; margin-bottom: 8px; }
/* XP Bar */
.xp-bar-container { width: 100%; margin-bottom: 12px; }
.xp-label { font-size: 0.75rem; color: var(--text-secondary); text-align: left; margin-bottom: 4px; display: block; }
.xp-bar { height: 11px; background-color: rgba(0, 0, 0, 0.3); border-radius: 6px; overflow: hidden; position: relative; border: 1px solid rgba(255,255,255,0.1); }
.xp-bar-fill { height: 100%; background: linear-gradient(90deg, var(--accent-color-3), var(--accent-color-1)); border-radius: 6px; transition: width 0.5s ease-in-out; animation: ki-charge 1.5s linear infinite; }
.xp-text { position: absolute; top: -1px; left: 0; right: 0; font-size: 0.65rem; font-weight: 500; color: #fff; text-shadow: 1px 1px 2px rgba(0,0,0,0.7); line-height: 13px; text-align: center; }
/* Stats Grid */
.stats-grid { display: grid; grid-template-columns: auto 1fr; gap: 6px 12px; text-align: left; font-size: 0.85rem; width: 100%; }
.stats-grid strong { color: var(--text-secondary); font-weight: 500; font-size: 0.8rem;}
.stats-grid span { color: var(--text-primary); font-weight: 500; text-align: right; font-size: 0.85rem;}
.stats-grid span[style*="--accent-color-2"]{color:var(--accent-color-2)}
.stats-grid span[style*="--accent-color-1"]{color:var(--accent-color-1)}
/* Divider */
.divider { height: 1px; background-color: var(--panel-border); border: none; margin: 12px 0; }
/* Botões Ação (Pontos, Perfil, Logout) */
.btn-pontos { display: inline-block; padding: 8px 15px; background: linear-gradient(45deg, var(--accent-color-2), #ffc107); color: #111; text-decoration: none; font-weight: 700; font-size: 0.9rem; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); margin-bottom: 8px; border: none; text-align: center; transition: all 0.2s ease; cursor: pointer; animation: pulse-glow-button 2.5s infinite alternate ease-in-out; }
.btn-pontos a { color: inherit; text-decoration: none; }
.btn-pontos:hover { transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4); filter: brightness(1.1); }
.btn-pontos[style*="cursor: default"]{background:var(--disabled-color);color:var(--text-secondary);filter:none;box-shadow:none;animation:none;opacity:0.7}
.action-button { display: block; width: 100%; padding: 10px 15px; border: none; border-radius: 8px; font-size: 0.85rem; font-weight: 500; text-decoration: none; text-align: center; cursor: pointer; transition: background-color 0.2s ease, transform 0.1s ease; }
.action-button:hover { transform: scale(1.02); }
.btn-perfil { background-color: var(--accent-color-1); color: #111; }
.btn-perfil:hover { background-color: #00cf68; }
.btn-logout { background-color: var(--danger-color); color: #fff; }
.btn-logout:hover { background-color: #ff3d3d; }
/* Chat Container */
.chat-container-ajax {
    width: 100%;
    margin-top: 15px; /* Espaço acima do chat */
    border: 1px solid var(--panel-border);
    border-radius: var(--border-radius);
    background-color: rgba(0,0,0,0.2);
    display: flex;
    flex-direction: column;
    height: 250px; /* Altura fixa para o chat */
}
/* Chat Messages Display (Dentro da coluna esquerda) */
.coluna-esquerda .chat-messages-display {
    flex-grow: 1; /* Ocupa o espaço restante */
    overflow-y: auto; /* Habilita scroll vertical */
    padding: 10px;
    display: flex;
    flex-direction: column; /* Mensagens empilhadas */
    gap: 8px; /* Espaço entre mensagens */
}
.coluna-esquerda .chat-messages-display::-webkit-scrollbar { width: 8px; }
.coluna-esquerda .chat-messages-display::-webkit-scrollbar-track { background: rgba(0,0,0,0.1); border-radius: 4px;}
.coluna-esquerda .chat-messages-display::-webkit-scrollbar-thumb { background-color: rgba(255, 255, 255, 0.2); border-radius: 4px; border: 1px solid rgba(0,0,0,0.2); }
.coluna-esquerda .chat-messages-display::-webkit-scrollbar-thumb:hover { background-color: rgba(255, 255, 255, 0.4); }
/* Chat Message */
.chat-message-ajax {
    max-width: 85%;
    padding: 6px 10px;
    border-radius: 10px;
    line-height: 1.4;
    font-size: 0.85rem;
    word-wrap: break-word;
    background-color: rgba(255, 255, 255, 0.08); /* Fundo padrão */
    align-self: flex-start; /* Alinha à esquerda por padrão */
    border-bottom-left-radius: 2px; /* Cantinho reto */
    color: var(--text-primary);
}
.chat-message-ajax.mine { /* Mensagens do próprio usuário */
    background-color: rgba(41, 121, 255, 0.3); /* Fundo azulado */
    align-self: flex-end; /* Alinha à direita */
    border-bottom-right-radius: 2px; /* Cantinho reto na direita */
    border-bottom-left-radius: 10px; /* Canto normal na esquerda */
}
.chat-message-ajax .sender {
    font-weight: 700;
    font-size: 0.7rem;
    color: var(--accent-color-1); /* Nome em verde */
    display: block;
    margin-bottom: 2px;
}
.chat-message-ajax .sender small { /* Timestamp */
    font-size: 0.8em;
    color: var(--text-secondary);
    font-weight: 400;
    margin-left: 5px;
}
.chat-message-ajax .msg-text { color: inherit; }
/* Chat Input Area (Dentro da coluna esquerda) */
.coluna-esquerda .chat-input-area {
    display: flex;
    padding: 8px;
    border-top: 1px solid var(--panel-border);
    background-color: rgba(0,0,0,0.2); /* Fundo levemente diferente */
}
.coluna-esquerda .chat-input-area input[type="text"] {
    flex-grow: 1; /* Campo ocupa espaço */
    padding: 8px 10px;
    border: 1px solid var(--panel-border);
    border-radius: 15px 0 0 15px; /* Cantos arredondados só na esquerda */
    background-color: rgba(0,0,0,0.3);
    color: var(--text-primary);
    font-size: 0.85rem;
    outline: none;
}
.coluna-esquerda .chat-input-area button {
    padding: 8px 12px;
    border: none;
    background-color: var(--accent-color-3); /* Botão azul */
    color: white;
    border-radius: 0 15px 15px 0; /* Cantos arredondados só na direita */
    cursor: pointer;
    font-weight: 500;
    font-size: 0.85rem;
    transition: background-color 0.2s ease;
}
.coluna-esquerda .chat-input-area button:hover { background-color: #216ae1; }
/* Chat Estados (Loading, Empty, Error) */
.chat-loading, .chat-empty, .chat-error {
    text-align: center;
    color: var(--text-secondary);
    padding: 20px;
    font-style: italic;
    font-size: 0.9rem;
}

/* --- Coluna Central (Conteúdo Principal) --- */
.coluna-central {
    width: 48%; /* Largura principal */
    display: flex;
    flex-direction: column;
    align-items: center; /* Centraliza conteúdo */
    text-align: center;
    gap: 10px; /* Espaço entre elementos */
}
.coluna-central h2 { color: #fff; font-weight: 700; font-size: 1.7rem; margin-bottom: 10px; border-bottom: 2px solid var(--accent-color-2); padding-bottom: 8px; display: inline-block; }
.coluna-central p { color: var(--text-primary); line-height: 1.5; font-size: 0.9rem; max-width: 550px; margin-bottom: 8px;}
.coluna-central strong { color: var(--accent-color-1); } /* Destaques em verde */
/* Links Rápidos da Praça */
.praca-acoes {
    margin-top: 10px;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); /* Layout responsivo */
    gap: 8px;
    width: 100%;
    max-width: 450px; /* Limita largura dos botões */
    margin-bottom: 10px;
}
.praca-link {
    display: block;
    padding: 8px 12px;
    background-color: rgba(45, 52, 66, 0.7);
    color: var(--text-primary);
    text-decoration: none;
    text-align: center;
    border-radius: 6px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    font-size: 0.8rem;
    font-weight: 500;
    transition: all 0.2s ease;
}
.praca-link:hover {
    background-color: rgba(55, 62, 76, 0.9);
    border-color: rgba(255, 255, 255, 0.2);
    color: #fff;
    transform: translateY(-2px);
}
.praca-link.disabled { /* Link desabilitado */
    background-color: var(--disabled-color);
    color: #8894a8;
    cursor: not-allowed;
    opacity: 0.7;
}
.praca-link.disabled:hover { transform: none; background-color: var(--disabled-color); }
/* Títulos das Seções (Desafios, Jogadores) */
.coluna-central h3 {
    color: var(--accent-color-1); /* Títulos em verde */
    font-weight: 500;
    font-size: 1.05rem;
    margin-top: 15px;
    margin-bottom: 8px;
    width: 100%;
    text-align: center;
    padding-bottom: 6px;
    border-bottom: 1px solid var(--panel-border);
}
/* Notificações de Desafio */
#challenge-notifications { margin-top: 0px; margin-bottom: 10px; width: 100%; max-width: 500px; }
.challenge-notification {
    background-color: rgba(255, 171, 0, 0.15); /* Fundo alaranjado leve */
    border: 1px solid var(--accent-color-2); /* Borda laranja */
    border-radius: 8px;
    padding: 10px 12px;
    margin-bottom: 8px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    animation: fadeInChallenge 0.5s ease;
}
.challenge-text { font-size: 0.9rem; text-align: center; }
.challenge-text strong { color: var(--accent-color-1); } /* Nome desafiante em verde */
.challenge-text small { font-size: 0.8em; color: var(--text-secondary); margin-left: 5px; } /* Timestamp */
.challenge-actions { display: flex; gap: 8px; margin-top: 4px; }
.challenge-actions button { padding: 5px 10px; font-size: 0.8rem; border-radius: 5px; border: none; font-weight: 500; cursor: pointer; transition: background-color 0.2s ease, transform 0.1s ease; }
.challenge-actions button:hover { transform: scale(1.05); }
.btn-aceitar { background-color: var(--accent-color-1); color: #111; } /* Botão Aceitar Verde */
.btn-aceitar:hover { background-color: #00c853; }
.btn-recusar { background-color: var(--danger-color); color: #fff; } /* Botão Recusar Vermelho */
.btn-recusar:hover { background-color: #d63031; }
/* Lista de Jogadores na Praça */
.lista-jogadores-praca {
    list-style: none;
    padding: 0;
    width: 100%;
    max-width: 400px; /* Largura máxima da lista */
    max-height: 110px; /* Altura máxima com scroll */
    overflow-y: auto; /* Scroll vertical */
    margin-top: 0;
    border: 1px solid var(--panel-border);
    border-radius: 8px;
    padding: 8px;
    background-color: rgba(0,0,0,0.1);
}
.jogador-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: rgba(255, 255, 255, 0.05);
    padding: 5px 10px;
    border-radius: 6px;
    margin-bottom: 5px;
    font-size: 0.8rem;
    gap: 8px;
}
.jogador-item:last-child { margin-bottom: 0; }
.jogador-info { display: flex; flex-direction: column; align-items: flex-start; flex-grow: 1; }
.jogador-item .nome { color: var(--text-primary); font-weight: 500; }
.jogador-item .nivel { color: var(--accent-color-1); font-size: 0.75rem; font-weight: bold; }
.jogador-info .player-profile-link { text-decoration: none; color: inherit; display: inline-block; transition: color 0.2s ease; }
.jogador-info .player-profile-link:hover .nome { text-decoration: underline; color: var(--accent-color-2); }
.btn-desafiar { /* Botão Desafiar na lista */
    padding: 3px 8px;
    font-size: 0.75rem;
    font-weight: 500;
    color: #fff;
    background-color: var(--danger-color); /* Vermelho */
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.2s ease;
    white-space: nowrap; /* Evita quebra de linha */
}
.btn-desafiar:hover { background-color: #d63031; }
.btn-desafiar:disabled { background-color: var(--disabled-color); cursor: not-allowed; opacity: 0.7; }
.praca-vazia { color: var(--text-secondary); text-align: center; font-style: italic; margin-top: 8px; font-size: 0.85rem; }
/* Scrollbar da Lista de Jogadores */
.lista-jogadores-praca::-webkit-scrollbar { width: 6px; }
.lista-jogadores-praca::-webkit-scrollbar-track { background: rgba(0,0,0,0.1); border-radius: 3px;}
.lista-jogadores-praca::-webkit-scrollbar-thumb { background-color: rgba(255, 255, 255, 0.2); border-radius: 3px; }
.lista-jogadores-praca::-webkit-scrollbar-thumb:hover { background-color: rgba(255, 255, 255, 0.4); }

/* --- Arena Register Section --- */
.arena-register-section {
    background-color: rgba(28, 28, 40, 0.1); /* Fundo sutil */
    padding: 20px;
    border-radius: 10px;
    border: 1px solid var(--panel-border);
    text-align: center;
    max-width: 600px; /* Limita largura da seção */
    width: 100%;
    margin: 20px auto; /* Espaçamento acima/abaixo */
}
.arena-register-section h3.arena-section-title {
    color: var(--accent-color-2); /* Título principal laranja */
    margin-top: 0;
    margin-bottom: 15px;
    border-bottom: 1px solid var(--panel-border);
    padding-bottom: 8px;
    font-size: 1.2rem;
    font-weight: 500;
}
.arena-register-section h3.arena-section-title:nth-of-type(2) { /* Segundo título (Sua Arena Atual) */
    color: #e9c46a; /* Tom de amarelo/dourado */
    margin-top: 25px;
}
.arena-register-section p { margin-bottom: 10px; line-height: 1.5; color: var(--text-secondary); font-size: 0.85rem; }
.arena-register-section p strong { color: var(--text-primary); font-weight: 500; }
.arena-register-section .error { color: var(--danger-color) !important; font-weight: bold; }
.arena-register-section form { margin-top: 15px; }
.arena-register-section button { /* Botão Registrar / Registrado */
    background-color: #e94560; /* Rosa/Vermelho */
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    font-size: 0.9em;
    cursor: pointer;
    transition: background-color 0.3s ease, opacity 0.3s ease;
    margin: 5px;
}
.arena-register-section button:hover:not(:disabled) { background-color: #c23148; }
.arena-register-section button:disabled { background-color: var(--disabled-color); opacity: 0.7; cursor: not-allowed; }
.arena-register-section a { /* Link "Retornar à sua Arena" */
    color: #a7c957; /* Verde claro */
    text-decoration: none;
    font-weight: bold;
    font-size: 0.9em;
}
.arena-register-section a:hover { text-decoration: underline; }
.arena-register-section .arena-list { /* Lista de arena ativa */
    text-align: left;
    margin-top: 15px;
    border-top: none;
    padding-top: 0;
}
.arena-register-section .arena-item { /* Item da arena ativa */
    background-color: rgba(78, 74, 104, 0.2); /* Fundo roxo sutil */
    padding: 10px 15px;
    border-radius: 5px;
    margin-bottom: 10px;
    border-left: 3px solid #e9c46a; /* Borda dourada */
}
.arena-register-section .arena-item strong { color: #fca311; } /* Destaques Laranja */
.arena-register-section .arena-item p { margin: 5px 0; font-size: 0.85em; color: var(--text-primary); }
.arena-register-section .refresh-button-container { text-align: center; margin-bottom: 15px; }
.arena-register-section .refresh-button { /* Botão Atualizar Status */
    background-color: var(--accent-color-3); /* Azul */
    font-size: 0.8em;
    padding: 8px 15px;
}
.arena-register-section .refresh-button:hover { background-color: #216ae1; }
/* Detalhes (usado para esconder sumário, se necessário) */
details { padding: 0; border: none; background: none; margin: 0; }
summary { display: none; }


/* --- Coluna Direita (Navegação Lateral) --- */
.coluna-direita {
    width: 26%;
    min-width: 250px;
    padding: 15px; /* Menor padding */
    display: flex;
    flex-direction: column;
    gap: 8px; /* Espaço entre botões */
}
.nav-button { /* Estilo dos botões de navegação */
    display: grid;
    grid-template-columns: 45px 1fr; /* Coluna ícone + Coluna texto */
    align-items: center;
    gap: 12px;
    padding: 10px 12px 10px 8px; /* Padding ajustado */
    background: linear-gradient(to bottom, rgba(55, 62, 76, 0.85), rgba(40, 44, 52, 0.85));
    color: var(--text-secondary);
    text-decoration: none;
    border-radius: 8px;
    border: 1px solid var(--panel-border);
    font-size: 0.85rem;
    font-weight: 500;
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    cursor: pointer;
}
.nav-button-icon-area { /* Área do ícone */
    grid-column: 1 / 2;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 28px; /* Altura fixa para alinhar ícones */
}
.nav-button-icon { /* Ícone imagem */
    width: 28px;
    height: 28px;
    object-fit: contain; /* Ajusta imagem sem distorcer */
    opacity: 0.7;
    transition: opacity 0.2s ease, transform 0.2s ease;
    display: block;
    margin: 0;
    flex-shrink: 0;
}
.nav-button i.fas { /* Ícone FontAwesome */
    font-size: 22px;
    opacity: 0.7;
    transition: opacity 0.2s ease, transform 0.2s ease;
    color: inherit;
}
.nav-button span { /* Texto do botão */
    grid-column: 2 / 3;
    text-align: left;
}
.nav-button:hover { /* Hover normal */
    background: linear-gradient(to bottom, rgba(65, 72, 86, 0.95), rgba(50, 54, 62, 0.95));
    border-color: rgba(255, 255, 255, 0.3);
    color: #fff;
    transform: translateY(-2px) scale(1.01);
    box-shadow: 0 5px 10px rgba(0,0,0,0.3), 0 0 8px rgba(41, 121, 255, 0.4); /* Sombra azulada */
}
.nav-button:hover .nav-button-icon,
.nav-button:hover i.fas { /* Ícone no hover */
    opacity: 1;
    transform: scale(1.05);
}
.nav-button:active { /* Clique */
    transform: translateY(0px) scale(1.0);
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    filter: brightness(0.95);
}
.nav-button.active { /* Botão da página atual */
    background: linear-gradient(to bottom, var(--accent-color-1), #00c853); /* Verde */
    color: #000; /* Texto escuro */
    border-color: rgba(0, 230, 118, 0.5);
    font-weight: 700;
    box-shadow: 0 3px 6px rgba(0,0,0,0.3), inset 0 1px 1px rgba(255,255,255,0.2);
}
.nav-button.active .nav-button-icon,
.nav-button.active i.fas { opacity: 1; filter: brightness(0.8); }
.nav-button.active:hover { filter: brightness(1.1); box-shadow: 0 5px 10px rgba(0,0,0,0.3), 0 0 8px var(--accent-color-1); }
.nav-button.disabled { /* Botão desabilitado */
    background: var(--disabled-color) !important;
    color: #8894a8 !important;
    cursor: not-allowed !important;
    border-color: rgba(0, 0, 0, 0.2) !important;
    opacity: 0.6 !important;
    box-shadow: none !important;
}
.nav-button.disabled:hover {
    background: var(--disabled-color) !important;
    transform: none !important;
    border-color: rgba(0, 0, 0, 0.2) !important;
    color: #8894a8 !important;
    box-shadow: none !important;
}
.nav-button.disabled .nav-button-icon,
.nav-button.disabled i.fas { filter: grayscale(100%); opacity: 0.5; }
.nav-button.logout:hover { /* Hover especial para Logout */
    background: linear-gradient(to bottom, var(--danger-color), #c0392b) !important; /* Vermelho */
    border-color: rgba(255, 255, 255, 0.2) !important;
    box-shadow: 0 5px 10px rgba(0,0,0,0.3), 0 0 8px var(--danger-color) !important;
}

/* --- Bottom Nav (Mobile) --- */
#bottom-nav {
    display: none; /* Escondido por padrão, mostrado via media query */
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: rgba(20, 23, 31, 0.97); /* Fundo escuro com transparência */
    border-top: 1px solid var(--panel-border);
    padding: 2px 0;
    box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.35);
    justify-content: space-around; /* Espaça itens igualmente */
    align-items: stretch; /* Itens ocupam altura total */
    z-index: 1000;
    backdrop-filter: blur(6px);
    height: 60px; /* Altura fixa */
}
.bottom-nav-item {
    display: flex;
    flex-direction: column; /* Ícone acima do texto */
    align-items: center;
    justify-content: center;
    flex-grow: 1; /* Ocupa espaço disponível */
    text-decoration: none;
    color: var(--text-secondary);
    padding: 4px 2px;
    font-size: 0.65rem; /* Tamanho pequeno de texto */
    text-align: center;
    transition: background-color 0.2s ease, color 0.2s ease;
    cursor: pointer;
    border-radius: 5px;
    margin: 2px;
    line-height: 1.2;
    font-family: var(--font-main);
}
.bottom-nav-item:not(.active):not(.disabled):hover {
    background-color: rgba(255, 255, 255, 0.05); /* Leve destaque no hover */
    color: var(--text-primary);
}
.bottom-nav-item.active { /* Item da página atual */
    color: var(--accent-color-1); /* Verde */
    font-weight: bold;
    background-color: rgba(0, 230, 118, 0.1); /* Fundo verde leve */
}
.bottom-nav-icon { font-size: 1.5rem; line-height: 1; margin-bottom: 4px; }
.bottom-nav-label { font-size: inherit; }
.bottom-nav-item.disabled { /* Item desabilitado */
    cursor: not-allowed;
    opacity: 0.5;
    color: #6a7383 !important;
    background-color: transparent !important;
}
.bottom-nav-item.disabled:hover { color: #6a7383 !important; }

/* --- Modal Popup (Notificações) --- */
.modal-overlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.75); /* Fundo escuro semi-transparente */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1100; /* Acima de outros elementos */
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0s linear 0.3s; /* Animação fade-in */
}
.modal-overlay.visible { /* Estado visível */
    opacity: 1;
    visibility: visible;
    transition: opacity 0.3s ease;
}
.modal-popup {
    background-color: var(--panel-bg, #263238); /* Usa variável do painel ou fallback */
    padding: 25px 30px;
    border-radius: var(--border-radius, 10px);
    border: 1px solid var(--panel-border, rgba(255, 255, 255, 0.15));
    box-shadow: var(--shadow, 0 8px 25px rgba(0, 0, 0, 0.5));
    width: 90%; /* Responsivo */
    max-width: 450px; /* Largura máxima */
    text-align: center;
    position: relative; /* Para posicionar botão de fechar */
    transform: scale(0.9); /* Efeito de zoom-in */
    transition: transform 0.3s ease;
    color: var(--text-primary, #e8eaed);
}
.modal-overlay.visible .modal-popup { transform: scale(1); } /* Animação zoom-in */
.modal-popup h3 {
    color: var(--dbz-orange, #f5a623); /* Laranja DBZ */
    font-family: var(--font-main);
    margin-top: 0;
    margin-bottom: 15px;
    font-size: 1.4em;
    border-bottom: 1px solid var(--dbz-orange-dark, #e47d1e);
    padding-bottom: 10px;
}
.modal-popup #popup-message { /* Área da mensagem */
    color: inherit;
    font-size: 1rem;
    line-height: 1.6;
    margin-bottom: 25px;
    min-height: 40px; /* Evita colapso */
    word-wrap: break-word; /* Quebra palavras longas */
}
.modal-popup #popup-actions { /* Área dos botões */
    display: flex;
    justify-content: center;
    gap: 15px;
    flex-wrap: wrap; /* Quebra linha se não couber */
}
.modal-popup .popup-action-btn { /* Botões de ação do popup */
    display: inline-block;
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    font-size: 0.9rem;
    font-weight: 500;
    text-decoration: none;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s ease;
    min-width: 100px; /* Largura mínima */
}
.popup-action-btn.btn-ok { background-color: var(--accent-color-3, #2979ff); color: #fff; } /* Botão OK azul */
.popup-action-btn.btn-accept { background-color: var(--accent-color-1, #00e676); color: #111; } /* Botão Aceitar verde */
.popup-action-btn.btn-reject { background-color: var(--danger-color, #ff5252); color: #fff; } /* Botão Rejeitar vermelho */
.popup-action-btn:hover { transform: translateY(-2px); filter: brightness(1.1); } /* Efeito hover */
.modal-close-btn { /* Botão 'X' para fechar */
    position: absolute;
    top: 10px; right: 15px;
    background: none;
    border: none;
    font-size: 1.8em;
    color: var(--text-secondary, #bdc1c6);
    cursor: pointer;
    line-height: 1;
    padding: 0;
    opacity: 0.7;
}
.modal-close-btn:hover { color: var(--text-primary, #e8eaed); opacity: 1; }

/* --- Media Queries (Responsividade) --- */

/* Tablets e Telas Menores (~1200px) */
@media (max-width: 1200px) {
    body { padding: 15px; padding-bottom: var(--body-original-padding-bottom); /* Reset padding for JS */ }
    .container {
        flex-direction: column; /* Colunas empilhadas */
        align-items: center;
        width: 100%;
        max-width: 95%;
        padding: 0;
        gap: 15px;
    }
    .coluna {
        width: 100% !important; /* Ocupa largura total */
        max-width: 800px; /* Limita largura máxima */
        margin-bottom: 15px;
    }
    .coluna-direita, .coluna-esquerda { min-width: unset; }
    .coluna-central { max-height: none; overflow-y: visible; }
}

/* Dispositivos Móveis (~768px) */
@media (max-width: 768px) {
    body {
        padding: 10px;
        /* Padding inferior aumentado para não cobrir conteúdo com bottom-nav */
        padding-bottom: 75px; /* Espaço para o bottom nav (ajustar se altura do nav mudar) */
    }
    .feedback-container { font-size: 0.9rem; padding: 10px 15px; margin: 0 auto 10px auto;}
    .coluna-direita { display: none; } /* Esconde navegação lateral */
    #bottom-nav { display: flex; } /* Mostra navegação inferior */

    .coluna { padding: 15px; }
    .foto { width: 100px; height: 100px; }
    .player-name { font-size: 1.2rem; }
    .player-level { font-size: 0.95rem; }
    .stats-grid { font-size: 0.8rem; }
    .btn-pontos { font-size: 0.85rem; }
    .coluna-central h2 { font-size: 1.4rem; }
    .coluna-central h3 { font-size: 1.0rem; }
    .coluna-central p { font-size: 0.85rem; }
    .coluna-esquerda > div:last-child { margin-top: 15px; padding-top: 10px; border-top: 1px solid var(--panel-border); } /* Adiciona linha antes dos botões inferiores */
    .action-button { font-size: 0.85rem; padding: 10px 12px;}
    .lista-jogadores-praca { max-width: 100%; max-height: 110px; }
    .chat-container-ajax { height: 200px; } /* Reduz altura do chat */
    .praca-acoes { grid-template-columns: repeat(auto-fit, minmax(110px, 1fr)); max-width: 100%;}
}

/* Dispositivos Móveis Pequenos (~480px) */
@media (max-width: 480px) {
    body {
        padding: 8px;
        padding-bottom: 70px; /* Ajuste fino para bottom nav */
    }
    .container { gap: 8px; }
    .coluna { padding: 12px; margin-bottom: 8px; }
    .foto { width: 80px; height: 80px; border-width: 3px;}
    .player-name { font-size: 1.0rem; }
    .player-level { font-size: 0.85rem; }
    .player-race, .player-rank { font-size: 0.75rem; }
    .zeni-display { font-size: 0.9rem; }
    .xp-bar-container { margin-bottom: 8px;}
    .xp-label { font-size: 0.7rem;}
    .xp-bar { height: 9px;}
    .xp-text { font-size: 0.6rem; line-height: 11px;}
    .stats-grid { font-size: 0.75rem; gap: 4px 8px; }
    .stats-grid strong { font-weight: 400; font-size: 0.7rem;}
    .stats-grid span { font-size: 0.75rem;}
    .btn-pontos { font-size: 0.8rem; padding: 7px 12px;}
    .action-button { font-size: 0.8rem; padding: 9px 10px;}
    .coluna-central h2 { font-size: 1.2rem; }
    .coluna-central h3 { font-size: 0.95rem; }
    .coluna-central p, .chat-message-ajax, .lista-jogadores-praca { font-size: 0.8rem; }
    #bottom-nav { height: 55px; } /* Altura menor para nav inferior */
    .bottom-nav-icon { font-size: 1.2rem; }
    .bottom-nav-label { font-size: 0.6rem; }
    .feedback-container { font-size: 0.85rem; padding: 8px 12px; margin: 0 auto 8px auto;}
    .chat-container-ajax { height: 160px; } /* Altura ainda menor do chat */
    .praca-acoes { gap: 6px;}
    .praca-link { padding: 7px 10px; font-size: 0.75rem;}
    .lista-jogadores-praca { max-height: 90px; }
    .arena-register-section p { font-size: 0.8rem; }
    .arena-register-section button { padding: 8px 15px; font-size: 0.85em; }
    .arena-register-section .arena-item p { font-size: 0.8em; }
}